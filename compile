#!/bin/sh

# Flags for make
# -j 2 uses two cores when compiling
MAKEFLAGS='-j 2'

# Change directory, discard output
# This allows us to return to our old working directory easily at the end
pushd $LFS/sources > /dev/null

# Binutils {{{ 
if [ ! -d binutils-2.32 ]; then
	printf "Extracting binutils..."
	tar -xf binutils-2.32.tar.xz 
	printf "done!\n"
fi

printf "Compiling binutils...\n"
# Binutils wants to be made in a build folder
mkdir -v binutils-2.32/build; cd binutils-2.32/build
# Time the make so I can get a general idea for how long everything else takes
time {
	../configure					\
		--prefix=/tools				\
		--with-sysroot=$LFS			\
		--with-libpath=/tools/lib	\
		--target=$LFS_TGT			\
		--disable-nls				\
		--disable-werror			\
	;
	make $MAKEFLAGS;
	# I copied this from the bible, but I'm really not sure why it needs to be
	# a switch. looks like maybe for the addition of more later?
	# Anyway, it makes a symbolic link to set up the library folder into /tools
	case $(uname -m) in
		x86_64) mkdir -v /tools/lib && ln -sv /lib /tools/lib64 ;;
	esac
	make $MAKEFLAGS install;
}
cd ..
printf "done!\n"
# }}}

# Return to previous working directory, discard the output
popd > /dev/null

exit

Python-3.7.2.tar.xz
XML-Parser-2.44.tar.gz
acl-2.2.53.tar.gz
attr-2.4.48.tar.gz
autoconf-2.69.tar.xz
automake-1.16.1.tar.xz
bash-5.0.tar.gz
bc-1.07.1.tar.gz
bison-3.3.2.tar.xz
bzip2-1.0.6-install_docs-1.patch
bzip2-1.0.6.tar.gz
check-0.12.0.tar.gz
coreutils-8.30-i18n-1.patch
coreutils-8.30.tar.xz
dbus-1.12.12.tar.gz
dejagnu-1.6.2.tar.gz
diffutils-3.7.tar.xz
e2fsprogs-1.44.5.tar.gz
elfutils-0.176.tar.bz2
eudev-3.2.7.tar.gz
expat-2.2.6.tar.bz2
expect5.45.4.tar.gz
file-5.36.tar.gz
findutils-4.6.0.tar.gz
flex-2.6.4.tar.gz
gawk-4.2.1.tar.xz
gcc-8.2.0.tar.xz
gdbm-1.18.1.tar.gz
gettext-0.19.8.1.tar.xz
glibc-2.29-fhs-1.patch
glibc-2.29.tar.xz
gmp-6.1.2.tar.xz
gperf-3.1.tar.gz
grep-3.3.tar.xz
groff-1.22.4.tar.gz
grub-2.02.tar.xz
gzip-1.10.tar.xz
iana-etc-2.30.tar.bz2
inetutils-1.9.4.tar.xz
intltool-0.51.0.tar.gz
iproute2-4.20.0.tar.xz
kbd-2.0.4-backspace-1.patch
kbd-2.0.4.tar.xz
kmod-26.tar.xz
less-530.tar.gz
lfs-bootscripts-20180820.tar.bz2
libcap-2.26.tar.xz
libffi-3.2.1.tar.gz
libpipeline-1.5.1.tar.gz
libtool-2.4.6.tar.xz
linux-4.20.12.tar.xz
m4-1.4.18.tar.xz
make-4.2.1.tar.bz2
man-db-2.8.5.tar.xz
man-pages-4.16.tar.xz
md5sums
meson-0.49.2.tar.gz
mpc-1.1.0.tar.gz
mpfr-4.0.2.tar.xz
ncurses-6.1.tar.gz
ninja-1.9.0.tar.gz
openssl-1.1.1a.tar.gz
patch-2.7.6.tar.xz
perl-5.28.1.tar.xz
pkg-config-0.29.2.tar.gz
procps-ng-3.3.15.tar.xz
psmisc-23.2.tar.xz
python-3.7.2-docs-html.tar.bz2
readline-8.0.tar.gz
sed-4.7.tar.xz
shadow-4.6.tar.xz
sysklogd-1.5.1.tar.gz
sysvinit-2.93-consolidated-1.patch
sysvinit-2.93.tar.xz
tar-1.31.tar.xz
tcl8.6.9-src.tar.gz
texinfo-6.5.tar.xz
tzdata2018i.tar.gz
udev-lfs-20171102.tar.bz2
util-linux-2.33.1.tar.xz
vim-8.1.tar.bz2
xz-5.2.4.tar.xz
zlib-1.2.11.tar.xz

# vim: foldmethod=marker foldmarker={{{,}}}
